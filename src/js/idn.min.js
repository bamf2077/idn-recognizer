const idnjs={identify(e){const n={region:{area:{value:void 0,name:void 0,valid:!1},province:{value:void 0,name:void 0,valid:!1},prefecture:{value:void 0,name:void 0,valid:!1},county:{value:void 0,name:void 0,valid:!1}},dateOfBirth:{value:void 0,year:void 0,month:void 0,day:void 0,valid:!1},sequenceCode:{value:void 0,sex:void 0,valid:!1},checkChar:{value:void 0,char:void 0,valid:!1},valid:!1};if(e){const a=e.replace(/[^0-9Xx]/g,"").toUpperCase(),t=parseInt(a.substr(0,1),10),o=parseInt(a.substr(0,2),10),r=parseInt(a.substr(0,4),10),s=parseInt(a.substr(0,6),10);if(t&&1===t.toString().length){n.region.area.value=t;const e=()=>{switch(t){case 1:n.region.area.name="华北地区";break;case 2:n.region.area.name="东北地区";break;case 3:case 7:n.region.area.name="华东地区";break;case 4:case 8:n.region.area.name=41===o||42===o||43===o?"华中地区":44===o||45===o||46===o||8===t?"华南地区":"中南地区";break;case 5:n.region.area.name="西南地区";break;case 6:n.region.area.name="西北地区"}n.region.area.name&&(n.region.area.valid=!0)};e()}if(o&&2===o.toString().length){n.region.province.value=o;const e=new XMLHttpRequest,a="https://cdn.jsdelivr.net/gh/francis-zhao/idn-recognizer/dist/json/regions-cn-compact.json";e.open("GET",a),e.send(null),e.onload=(()=>{if(200===e.status){const a=JSON.parse(e.responseText),t=a[`${o}0000`];if(t&&(n.region.province.name=t,n.region.province.valid=!0),r&&4===r.toString().length){n.region.prefecture.value=r;const e=a[`${r}00`];if(e&&(e===t?(n.region.prefecture.name="",console.log("字段重复")):n.region.prefecture.name=e,n.region.prefecture.valid=!0),s&&6===s.toString().length){n.region.county.value=s;const o=a[s];o&&(o===t||o===e?(n.region.county.name="",console.log("字段重复")):n.region.county.name=o,n.region.county.valid=!0)}}}})}const i=a.substr(6,8);if(i&&i.length>3){const e=i.substr(0,4),a=parseInt(e,10);if(n.dateOfBirth.year=a,i.length>5){const t=i.substr(4,2),o=parseInt(t,10);if(n.dateOfBirth.month=o,8===i.length){const r=i.substr(6,2),s=parseInt(r,10);n.dateOfBirth.day=s,n.dateOfBirth.value=`${e}-${t}-${r}`;const c=!((a%4!=0||a%100==0)&&a%400!=0),l=(new Date).getFullYear();a>1900&&a<=l&&o>=1&&o<=12&&s>=1&&((1===o||3===o||5===o||7===o||8===o||10===o||12===o)&&31===s||(4===o||6===o||9===o||11===o)&&30===s||c&&2===o&&29===s||!c&&2===o&&28===s)&&(n.dateOfBirth.valid=!0)}}}const c=parseInt(a.substr(14,3),10);if(c&&3===c.toString().length){n.sequenceCode.value=c,n.sequenceCode.valid=!0;const e=parseInt(a.substr(16,1),10),t=e%2==0?"female":"male";n.sequenceCode.sex=t}if(a.length>=17){const e=a.substr(0,17).split(""),t=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],o=["1","0","X","9","8","7","6","5","4","3","2"];let r=0;for(let n=0;n<e.length;n+=1)r+=e[n]*t[n];const s=r%11,i=o[s];if(n.checkChar.char=i,18===a.length){const e=a.substr(17,1);n.checkChar.value=e,e===i&&(n.checkChar.valid=!0)}}n.region.area.valid&&n.region.province.valid&&n.region.prefecture.valid&&n.region.county.valid&&n.sequenceCode.valid&&n.checkChar.valid&&(n.valid=!0)}console.log(n)},generate(e){console.log(e)},mergeData(){function e(a,r){const s=new XMLHttpRequest,i=`https://cdn.jsdelivr.net/gh/francis-zhao/idn-recognizer/dist/json/regions-cn-${n[a]}.json`;s.open("GET",i),s.send(null),s.onload=(()=>{200===s.status&&(t[n[a]]=JSON.parse(s.responseText),Object.assign(o,t[n[a]]),a+1<r&&e(a+1,r))})}const n=[],a=2020;for(let e=1980;e<a;e+=1)n.push(e),e+1===a&&n.push("latest");const t={},o={};e(0,n.length),console.log(o)}};export{idnjs as default};