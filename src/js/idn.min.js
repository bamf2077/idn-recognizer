const idnjs={identify(e){const n={region:{area:{value:void 0,name:void 0,valid:!1},province:{value:void 0,name:void 0,valid:!1},prefecture:{value:void 0,name:void 0,valid:!1},county:{value:void 0,name:void 0,valid:!1}},dateOfBirth:{value:void 0,year:void 0,month:void 0,day:void 0,valid:!1},sequenceCode:{value:void 0,sex:void 0,valid:!1},checkChar:{value:void 0,char:void 0,valid:!1},valid:!1,message:void 0};if(e){const a=e.replace(/[^0-9Xx]/g,"").toUpperCase(),t=parseInt(a.substr(0,1),10),r=parseInt(a.substr(0,2),10),s=parseInt(a.substr(0,4),10),i=parseInt(a.substr(0,6),10);if(t&&1===t.toString().length){n.region.area.value=t;const e=()=>{switch(t){case 1:n.region.area.name="华北地区";break;case 2:n.region.area.name="东北地区";break;case 3:case 7:n.region.area.name="华东地区";break;case 4:case 8:n.region.area.name=41===r||42===r||43===r?"华中地区":44===r||45===r||46===r||8===t?"华南地区":"中南地区";break;case 5:n.region.area.name="西南地区";break;case 6:n.region.area.name="西北地区"}n.region.area.name&&(n.region.area.valid=!0)};e()}if(r&&2===r.toString().length){n.region.province.value=r;const e=new XMLHttpRequest,t="https://cdn.jsdelivr.net/gh/francis-zhao/idn-recognizer/dist/json/regions-cn-compact.json";e.open("GET",t),e.send(null),e.addEventListener("load",()=>{if(200===e.status){const a=JSON.parse(e.responseText),t=a[`${r}0000`];if(t&&(n.region.province.name=t,n.region.province.valid=!0),s&&4===s.toString().length){n.region.prefecture.value=s;const e=a[`${s}00`];if(e&&(e===t?(n.region.prefecture.name="",console.log("字段重复")):n.region.prefecture.name=e,n.region.prefecture.valid=!0),i&&6===i.toString().length){n.region.county.value=i;const r=a[i];r&&(r===t||r===e?(n.region.county.name="",console.log("字段重复")):n.region.county.name=r,n.region.county.valid=!0)}}}}),e.addEventListener("loadend",()=>{const e=a.substr(6,8);if(e&&e.length>3){const a=e.substr(0,4),t=parseInt(a,10);if(n.dateOfBirth.year=t,e.length>5){const r=e.substr(4,2),s=parseInt(r,10);if(n.dateOfBirth.month=s,8===e.length){const i=e.substr(6,2),o=parseInt(i,10);n.dateOfBirth.day=o,n.dateOfBirth.value=`${a}-${r}-${i}`;const c=(new Date).getFullYear();t>1900&&t<=c&&s>=1&&s<=12&&o>=1&&(n.dateOfBirth.valid=!0)}}}const t=parseInt(a.substr(14,3),10);if(t&&3===t.toString().length){n.sequenceCode.value=t,n.sequenceCode.valid=!0;const e=parseInt(a.substr(16,1),10),r=e%2==0?"female":"male";n.sequenceCode.sex=r}if(a.length>=17){const e=a.substr(0,17).split(""),t=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],r=["1","0","X","9","8","7","6","5","4","3","2"];let s=0;for(let n=0;n<e.length;n+=1)s+=e[n]*t[n];const i=s%11,o=r[i];if(n.checkChar.char=o,18===a.length){const e=a.substr(17,1);n.checkChar.value=e,e===o&&(n.checkChar.valid=!0)}}return n.region.area.valid&&n.region.province.valid&&n.region.prefecture.valid&&n.region.county.valid&&n.dateOfBirth.valid&&n.sequenceCode.valid&&n.checkChar.valid?(n.valid=!0,n.message="success"):n.message="error",JSON.stringify(n)})}}return JSON.stringify({valid:!1,message:"error: empty input string."})},generate:e=>e,mergeData(){function e(a,s){const i=new XMLHttpRequest,o=`https://cdn.jsdelivr.net/gh/francis-zhao/idn-recognizer/dist/json/regions-cn-${n[a]}.json`;i.open("GET",o),i.send(null),i.onload=(()=>{200===i.status&&(t[n[a]]=JSON.parse(i.responseText),Object.assign(r,t[n[a]]),a+1<s&&e(a+1,s))})}const n=[],a=2020;for(let e=1980;e<a;e+=1)n.push(e),e+1===a&&n.push("latest");const t={},r={};e(0,n.length),console.log(JSON.stringify(r))}};export{idnjs as default};